{
  "$schema": "./schemas/analytics.schema.json",
  "version": "1.0.0",
  "lastUpdated": "2025-01-18T00:00:00Z",
  "description": "Analytics configuration for GalaSwap V3 trading bot persistence and monitoring",

  "database": {
    "cacheSettings": {
      "transactionCacheTtlMinutes": 5,
      "volumeDataCacheTtlMinutes": 2,
      "patternCacheTtlMinutes": 10,
      "maxCacheSize": 1000,
      "cleanupIntervalMinutes": 10,
      "enableCompression": true
    },
    "batchSettings": {
      "maxBatchSize": 100,
      "batchTimeoutMs": 5000,
      "enableBatching": true,
      "batchVolumeData": true,
      "batchPatterns": true,
      "batchAlerts": false
    },
    "performance": {
      "enableQueryOptimization": true,
      "useIndexes": true,
      "enableConnectionPooling": true,
      "maxConnections": 10,
      "connectionTimeout": 30000,
      "queryTimeout": 15000
    }
  },

  "volumeAnalysis": {
    "resolutions": {
      "5m": {
        "enabled": true,
        "retentionDays": 7,
        "compressionAfterDays": 3,
        "aggregationLevel": "raw"
      },
      "1h": {
        "enabled": true,
        "retentionDays": 30,
        "compressionAfterDays": 7,
        "aggregationLevel": "summary"
      },
      "24h": {
        "enabled": true,
        "retentionDays": 365,
        "compressionAfterDays": 30,
        "aggregationLevel": "daily"
      }
    },
    "patternDetection": {
      "enabled": true,
      "minDataPoints": 10,
      "confidenceThreshold": 0.6,
      "patterns": {
        "accumulation": {
          "enabled": true,
          "minVolumeIncrease": 1.3,
          "minDuration": 10,
          "maxDuration": 120
        },
        "distribution": {
          "enabled": true,
          "minVolumeDecrease": 0.7,
          "minDuration": 15,
          "maxDuration": 180
        },
        "breakout": {
          "enabled": true,
          "minVolumeSpike": 3.0,
          "confirmationPeriods": 3
        },
        "consolidation": {
          "enabled": true,
          "maxVariance": 0.3,
          "minDuration": 30,
          "maxDuration": 360
        }
      }
    },
    "anomalyDetection": {
      "enabled": true,
      "zscore_threshold": 2.5,
      "rolling_window": 50,
      "min_anomaly_duration": 2,
      "max_anomalies_per_hour": 10
    }
  },

  "snapshots": {
    "schedule": {
      "hourly": {
        "enabled": true,
        "minute": 0,
        "retention_days": 7,
        "include_trading_performance": true
      },
      "daily": {
        "enabled": true,
        "hour": 0,
        "minute": 0,
        "retention_days": 30,
        "include_trading_performance": true
      },
      "weekly": {
        "enabled": true,
        "day_of_week": 1,
        "hour": 0,
        "minute": 0,
        "retention_days": 90,
        "include_trading_performance": true
      },
      "manual": {
        "enabled": true,
        "retention_days": 30
      }
    },
    "metrics": {
      "system_health": {
        "include_memory_usage": true,
        "include_cpu_usage": true,
        "include_disk_usage": true,
        "include_network_stats": true,
        "include_error_counts": true
      },
      "trading_performance": {
        "include_profit_loss": true,
        "include_win_rate": true,
        "include_sharpe_ratio": true,
        "include_max_drawdown": true,
        "include_trade_count": true
      },
      "whale_tracking": {
        "include_alert_counts": true,
        "include_success_rates": true,
        "include_profitability": true,
        "include_pattern_analysis": true
      },
      "cache_performance": {
        "include_hit_rates": true,
        "include_response_times": true,
        "include_efficiency_ratios": true,
        "include_cleanup_events": true
      }
    }
  },

  "alerting": {
    "system_alerts": {
      "enabled": true,
      "health_score_threshold": 0.7,
      "memory_usage_threshold": 0.85,
      "error_rate_threshold": 0.05,
      "response_time_threshold": 5000,
      "disk_usage_threshold": 0.9
    },
    "performance_alerts": {
      "enabled": true,
      "cache_efficiency_threshold": 0.6,
      "database_latency_threshold": 1000,
      "query_timeout_threshold": 10000,
      "batch_failure_threshold": 0.1
    },
    "data_quality_alerts": {
      "enabled": true,
      "missing_data_threshold": 0.05,
      "stale_data_hours": 2,
      "duplicate_data_threshold": 0.01,
      "data_consistency_checks": true
    },
    "notification_channels": {
      "email": {
        "enabled": false,
        "recipients": [],
        "template": "analytics_alert"
      },
      "webhook": {
        "enabled": true,
        "url": "",
        "method": "POST",
        "timeout": 5000,
        "retry_count": 3
      },
      "log": {
        "enabled": true,
        "level": "warn"
      }
    }
  },

  "optimization": {
    "query_optimization": {
      "enable_query_cache": true,
      "cache_size": 100,
      "cache_ttl": 300,
      "optimize_indexes": true,
      "analyze_slow_queries": true,
      "slow_query_threshold": 1000
    },
    "storage_optimization": {
      "enable_compression": true,
      "compression_algorithm": "gzip",
      "archive_old_data": true,
      "archive_after_days": 90,
      "vacuum_frequency": "weekly"
    },
    "memory_optimization": {
      "enable_connection_pooling": true,
      "pool_size": 10,
      "enable_result_streaming": true,
      "batch_processing": true,
      "lazy_loading": true
    }
  },

  "monitoring": {
    "metrics_collection": {
      "enabled": true,
      "interval_seconds": 60,
      "include_custom_metrics": true,
      "export_prometheus": false,
      "export_json": true,
      "metrics_retention_hours": 24
    },
    "health_checks": {
      "database_connectivity": {
        "enabled": true,
        "interval_seconds": 30,
        "timeout_ms": 5000
      },
      "cache_performance": {
        "enabled": true,
        "interval_seconds": 60,
        "min_hit_rate": 0.5
      },
      "data_freshness": {
        "enabled": true,
        "interval_seconds": 300,
        "max_age_hours": 1
      }
    },
    "logging": {
      "level": "info",
      "enable_structured_logs": true,
      "include_performance_logs": true,
      "include_query_logs": false,
      "log_slow_operations": true,
      "slow_operation_threshold": 2000
    }
  },

  "maintenance": {
    "automated_cleanup": {
      "enabled": true,
      "schedule": "0 2 * * *",
      "cleanup_expired_cache": true,
      "cleanup_old_snapshots": true,
      "cleanup_processed_alerts": true,
      "cleanup_incomplete_patterns": true
    },
    "data_archiving": {
      "enabled": true,
      "schedule": "0 3 * * 0",
      "archive_format": "json",
      "compress_archives": true,
      "archive_location": "./data/archives/",
      "verify_archives": true
    },
    "backup_strategy": {
      "enabled": true,
      "schedule": "0 4 * * *",
      "backup_location": "./data/backups/",
      "retention_days": 30,
      "compress_backups": true,
      "verify_backups": true
    }
  },

  "integration": {
    "api_endpoints": {
      "base_url": "https://dex-backend-prod1.defi.gala.com",
      "websocket_url": "wss://bundle-backend-prod1.defi.gala.com",
      "volume_graph_data": {
        "endpoint": "/explore/graph-data",
        "rate_limit_per_second": 5,
        "retry_attempts": 3,
        "timeout_ms": 15000,
        "cache_responses": true
      },
      "transaction_history": {
        "endpoint": "/explore/transactions",
        "rate_limit_per_second": 3,
        "retry_attempts": 3,
        "timeout_ms": 20000,
        "cache_responses": true
      },
      "pool_detail": {
        "endpoint": "/explore/pool",
        "rate_limit_per_second": 15,
        "retry_attempts": 3,
        "timeout_ms": 5000,
        "cache_responses": true
      },
      "user_history": {
        "endpoint": "/explore/user-history",
        "rate_limit_per_second": 2,
        "retry_attempts": 3,
        "timeout_ms": 15000,
        "cache_responses": true
      }
    },
    "external_services": {
      "price_feeds": {
        "enabled": true,
        "update_interval_seconds": 30,
        "fallback_sources": ["coingecko", "coinmarketcap"]
      },
      "market_data": {
        "enabled": true,
        "update_interval_seconds": 60,
        "include_volume": true,
        "include_orderbook": false
      }
    }
  }
}